
<!DOCTYPE html><html>
<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8"/>
    
        <title>4.10.4. rootpy.logger Package &mdash; rootpy dev documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../_static/sphinx-bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
        <script type="text/javascript">
            var DOCUMENTATION_OPTIONS = {
                URL_ROOT:'../',
                VERSION:'dev',
                COLLAPSE_INDEX:false,
                FILE_SUFFIX:'.html',
                HAS_SOURCE:  true
            };
        </script>
            <script type="text/javascript" src="../_static/jquery.js"></script>
            <script type="text/javascript" src="../_static/underscore.js"></script>
            <script type="text/javascript" src="../_static/doctools.js"></script>
            <script type="text/javascript" src="../_static/bootstrap-dropdown.js"></script>
        <link rel="top" title="rootpy dev documentation" href="../index.html"/>
            <link rel="up" title="4. rootpy Package" href="modules.html"/>
            <link rel="next" title="4.10.5. math Package" href="rootpy.math.html"/>
            <link rel="prev" title="4.10.3. io Package" href="rootpy.io.html"/> 
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    
</head>
<body>

    <div class="navbar navbar-static-top">
        <div class="navbar-inner">
            <div class="container">

    <div class="related">
        <ul class="nav">
                <li class=""><a class="brand" href="../index.html">rootpy</a></li>
                <li>
                    <a href="../genindex.html"
                       title="General Index" accesskey="I">index</a>
                </li>
                <li>
                    <a href="../py-modindex.html"
                       title="Python Module Index" >modules</a>
                </li>
                <li>
                    <a href="rootpy.math.html"
                       title="4.10.5. math Package" accesskey="N">next</a>
                </li>
                <li>
                    <a href="rootpy.io.html"
                       title="4.10.3. io Package" accesskey="P">previous</a>
                </li>
                <li><a href="../user_guide.html"
                        >&lt;no title&gt;</a>
                </li>
                <li><a href="modules.html"
                        accesskey="U">4. rootpy Package</a>
                </li> 
        </ul>
    </div>
                <div class="pull-right">
                    
        <form class="navbar-search" action="../search.html"
              method="get">
            <input type="text" name="q" placeholder="search"/>
            <input type="hidden" name="check_keywords" value="yes"/>
            <input type="hidden" name="area" value="default"/>
        </form>
                </div>
            </div>
        </div>
    </div>


<ul class="quick-links">
    <li><strong>Quick links</strong></li>
    <li>
        <a href="https://github.com/rootpy/rootpy/">GitHub</a>
    </li>
    <li>
        <a href="https://github.com/rootpy/rootpy/issues?state=open">Issues</a>
    </li>
    <li class="divider">&middot;</li>
    <li>
        <iframe class="github-btn"
                src="http://ghbtns.com/github-btn.html?user=rootpy&repo=rootpy&type=watch&count=true"
                allowtransparency="true" frameborder="0" scrolling="0"
                width="110px" height="20px"></iframe>
    </li>
    <li>
        <iframe class="github-btn"
                src="http://ghbtns.com/github-btn.html?user=rootpy&repo=rootpy&type=fork&count=true"
                allowtransparency="true" frameborder="0" scrolling="0"
                width="94px" height="20px"></iframe>
    </li>

    <!--<li class="divider">&middot;</li>
    <li class="follow-btn">
        <a href="https://twitter.com/"
           class="twitter-follow-button" data-width="145px"
           data-link-color="#0069D6" data-show-count="false">Follow
            @</a>
    </li>
    <li class="tweet-btn">
        <a href="https://twitter.com/share" class="twitter-share-button"
           data-url="http://rootpy.org" data-count="horizontal"
           data-via="twbootstrap"
           data-related=":Creator of rootpy">Tweet</a>
       </li>-->
    <li class="plusone-container">
        <g:plusone size="medium"></g:plusone>
    </li>
</ul>  
    <div class="container">
        <div class="content row">
                <div class="span9">
                    
  <div class="section" id="module-rootpy.logger">
<span id="rootpy-logger-package"></span><h1>4.10.4. <a class="reference internal" href="#module-rootpy.logger" title="rootpy.logger"><tt class="xref py py-mod docutils literal"><span class="pre">rootpy.logger</span></tt></a> Package<a class="headerlink" href="#module-rootpy.logger" title="Permalink to this headline">¶</a></h1>
<div class="section" id="rootpy-logger">
<h2>4.10.4.1. <a class="reference internal" href="#module-rootpy.logger" title="rootpy.logger"><tt class="xref py py-mod docutils literal"><span class="pre">rootpy.logger</span></tt></a><a class="headerlink" href="#rootpy-logger" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref py py-mod docutils literal"><span class="pre">rootpy</span></tt> overrides the default logging class, inserting a check that there
exists a default logging handler. If there is not, it adds one.</p>
<p>In additon, this can be used to intercept ROOT&#8217;s log messages and redirect them
through python&#8217;s logging subsystem</p>
<p>Example use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Disable colored logging (not needed if writing into a file, this is automatic).</span>
<span class="c"># Must be done before :py:mod:`rootpy` logs any messages.</span>
<span class="kn">import</span> <span class="nn">logging</span><span class="p">;</span> <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">rootpy</span> <span class="kn">import</span> <span class="n">log</span><span class="p">;</span> <span class="n">log</span> <span class="o">=</span> <span class="n">log</span><span class="p">[</span><span class="s">&quot;/myapp&quot;</span><span class="p">]</span>
<span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="c"># Results in &quot;DEBUG:myapp] Hello&quot;</span>

<span class="c"># Suppress all myapp debug and info messages</span>
<span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="c"># No effect</span>

<span class="n">mymod</span> <span class="o">=</span> <span class="n">log</span><span class="p">[</span><span class="s">&quot;mymod&quot;</span><span class="p">]</span>
<span class="n">mymod</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="c"># Results in &quot;WARNING:myapp.mymod] Hello&quot;</span>

<span class="c"># Suppress all rootpy debug and info messages</span>
<span class="n">log</span><span class="p">[</span><span class="s">&quot;/rootpy&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

<span class="c"># Suppress messages coming from TCanvas like</span>
<span class="c"># INFO:ROOT.TCanvas.Print] png file /path/to/file.png has been created</span>
<span class="n">log</span><span class="p">[</span><span class="s">&quot;/ROOT.TCanvas.Print&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

<span class="c"># Suppress warning messages coming the ``TClass`` constructor:</span>
<span class="n">log</span><span class="p">[</span><span class="s">&quot;/ROOT.TClass.TClass&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>

<span class="c"># Precisely remove messages containing the text &quot;no dictionary for class&quot;</span>
<span class="c"># (doesn&#39;t work when attached to parent logger)</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="k">class</span> <span class="nc">NoDictMessagesFilter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;no dictionary for class&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">msg</span>
<span class="n">log</span><span class="p">[</span><span class="s">&quot;/ROOT.TClass.TClass&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">addFilter</span><span class="p">(</span><span class="n">NoDictMessagesFilter</span><span class="p">())</span>

<span class="c"># Turn ROOT errors into exceptions</span>
<span class="kn">from</span> <span class="nn">rootpy.logger.magic</span> <span class="kn">import</span> <span class="n">DANGER</span>
<span class="n">DANGER</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="bp">True</span>

<span class="kn">import</span> <span class="nn">ROOT</span>
<span class="n">ROOT</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="s">&quot;Test fatal&quot;</span><span class="p">)</span>
<span class="c"># Result:</span>
<span class="c"># ERROR:ROOT.test] Test fatal</span>
<span class="c"># Traceback (most recent call last):</span>
<span class="c">#   File &quot;test.py&quot;, line 36, in &lt;module&gt;</span>
<span class="c">#     ROOT.Fatal(&quot;test&quot;, &quot;Test fatal&quot;)</span>
<span class="c">#   File &quot;test.py&quot;, line 36, in &lt;module&gt;</span>
<span class="c">#     ROOT.Fatal(&quot;test&quot;, &quot;Test fatal&quot;)</span>
<span class="c">#   File &quot;rootpy/logger/roothandler.py&quot;, line 40, in python_logging_error_handler</span>
<span class="c">#     raise ROOTError(level, location, msg)</span>
<span class="c"># rootpy.ROOTError: level=6000, loc=&#39;test&#39;, msg=&#39;Test fatal&#39;</span>

<span class="c"># Primitive function tracing:</span>
<span class="nd">@log.trace</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">salut</span><span class="p">():</span>
    <span class="k">return</span>

<span class="nd">@log.trace</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">what</span><span class="p">):</span>
    <span class="n">salut</span><span class="p">()</span>
    <span class="k">return</span> <span class="s">&quot;42&quot;</span>

<span class="n">hello</span><span class="p">(</span><span class="s">&quot;world&quot;</span><span class="p">)</span>
<span class="c"># Result:</span>
<span class="c">#   DEBUG:myapp.trace.hello] &gt; (&#39;world&#39;,) {}</span>
<span class="c">#   DEBUG:myapp.trace.salut]  &gt; () {}</span>
<span class="c">#   DEBUG:myapp.trace.salut]  &lt; return None [0.00 sec]</span>
<span class="c">#   DEBUG:myapp.trace.hello] &lt; return 42 [0.00 sec]</span>
</pre></div>
</div>
<dl class="function">
<dt id="rootpy.logger.log_trace">
<tt class="descclassname">rootpy.logger.</tt><tt class="descname">log_trace</tt><big>(</big><em>logger</em>, <em>level=10</em>, <em>show_enter=True</em>, <em>show_exit=True</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger.html#log_trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.log_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>log a statement on function entry and exit</p>
</dd></dl>

</div>
<div class="section" id="module-rootpy.logger.color">
<span id="rootpy-logger-color-package"></span><h2>4.10.4.2. <a class="reference internal" href="#module-rootpy.logger.color" title="rootpy.logger.color"><tt class="xref py py-mod docutils literal"><span class="pre">rootpy.logger.color</span></tt></a> Package<a class="headerlink" href="#module-rootpy.logger.color" title="Permalink to this headline">¶</a></h2>
<p>Provides a <tt class="docutils literal"><span class="pre">CustomFormatter</span></tt> and <tt class="docutils literal"><span class="pre">CustomColoredFormatter</span></tt> which are enable
to insert ANSI color codes.</p>
<dl class="function">
<dt id="rootpy.logger.color.default_log_handler">
<tt class="descclassname">rootpy.logger.color.</tt><tt class="descname">default_log_handler</tt><big>(</big><em>level=10</em>, <em>singleton={'value': &lt;logging.StreamHandler object at 0x581ead0&gt;}</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/color.html#default_log_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.color.default_log_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates a default log handler, with colour if we&#8217;re connected to a
terminal.</p>
</dd></dl>

</div>
<div class="section" id="module-rootpy.logger.extended_logger">
<span id="rootpy-logger-extended-logger-package"></span><h2>4.10.4.3. <a class="reference internal" href="#module-rootpy.logger.extended_logger" title="rootpy.logger.extended_logger"><tt class="xref py py-mod docutils literal"><span class="pre">rootpy.logger.extended_logger</span></tt></a> Package<a class="headerlink" href="#module-rootpy.logger.extended_logger" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="rootpy.logger.extended_logger.ExtendedLogger">
<em class="property">class </em><tt class="descclassname">rootpy.logger.extended_logger.</tt><tt class="descname">ExtendedLogger</tt><big>(</big><em>name</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/2/library/logging.html#logging.Logger" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">logging.Logger</span></tt></a></p>
<p>A logger class which provides a few niceties, including automatically
enabling logging if no handlers are available.</p>
<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.basic_config_colorized">
<tt class="descname">basic_config_colorized</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.basic_config_colorized"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.basic_config_colorized" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure logging with a coloured output.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.frame_unique">
<em class="property">static </em><tt class="descname">frame_unique</tt><big>(</big><em>f</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.frame_unique"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.frame_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple representing a value which is unique to a given frame&#8217;s line of
execution</p>
</dd></dl>

<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.getChild">
<tt class="descname">getChild</tt><big>(</big><em>suffix</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.getChild"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.getChild" title="Permalink to this definition">¶</a></dt>
<dd><p>Taken from CPython 2.7, modified to remove duplicate prefix and suffixes</p>
</dd></dl>

<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.ignore">
<tt class="descname">ignore</tt><big>(</big><em>message_regex</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.ignore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.ignore" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives a context manager which filters out messages exactly matching
<tt class="docutils literal"><span class="pre">message_regex</span></tt> on the current filter.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">log</span><span class="p">[</span><span class="s">&quot;/ROOT&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">ignore</span><span class="p">(</span><span class="s">&quot;^this message is ignored$&quot;</span><span class="p">):</span>
    <span class="n">ROOT</span><span class="o">.</span><span class="n">Warning</span><span class="p">(</span><span class="s">&quot;location&quot;</span><span class="p">,</span> <span class="s">&quot;this message is ignored&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.show_stack_depth">
<tt class="descname">show_stack_depth</tt><big>(</big><em>record</em>, <em>frame</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.show_stack_depth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.show_stack_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the maximum stack depth to show requested by any hooks,
returning -1 if there are none matching, or if we&#8217;ve already emitted
one for the line of code referred to.</p>
</dd></dl>

<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.showdeletion">
<tt class="descname">showdeletion</tt><big>(</big><em>*objects</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.showdeletion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.showdeletion" title="Permalink to this definition">¶</a></dt>
<dd><p>Record a stack trace at the point when an ROOT TObject is deleted</p>
</dd></dl>

<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.showstack">
<tt class="descname">showstack</tt><big>(</big><em>message_regex='^.*$'</em>, <em>min_level=10</em>, <em>limit=4096</em>, <em>once=True</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.showstack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.showstack" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable showing the origin of log messages by dumping a stack trace into
the <tt class="docutils literal"><span class="pre">stack</span></tt> logger at the :const:<tt class="docutils literal"><span class="pre">logging.INFO</span></tt> severity.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message_regex</strong> &#8211; is a full-line regex which the message must
satisfy in order to trigger stack dump</li>
<li><strong>min_level</strong> &#8211; the minimum severity the message must have in order to
trigger the stack dump</li>
<li><strong>limit</strong> &#8211; Maximum stack depth to show</li>
<li><strong>once</strong> &#8211; Only show the stack once per unique <tt class="docutils literal"><span class="pre">(logger,</span> <span class="pre">origin</span> <span class="pre">line</span>
<span class="pre">of</span> <span class="pre">code)</span></tt></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rootpy.logger.extended_logger.ExtendedLogger.trace">
<tt class="descname">trace</tt><big>(</big><em>level=10</em>, <em>show_enter=True</em>, <em>show_exit=True</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#ExtendedLogger.trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.ExtendedLogger.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Functions decorated with this function show function entry and exit with
values, defaults to debug log level.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>level</strong> &#8211; log severity to use for function tracing</li>
<li><strong>show_enter</strong> &#8211; log function entry</li>
<li><strong>show_enter</strong> &#8211; log function exit</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">log</span> <span class="o">=</span> <span class="n">rootpy</span><span class="o">.</span><span class="n">log</span><span class="p">[</span><span class="s">&quot;/myapp&quot;</span><span class="p">]</span>
<span class="nd">@log.trace</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">salut</span><span class="p">():</span>
    <span class="k">return</span>

<span class="nd">@log.trace</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">what</span><span class="p">):</span>
    <span class="n">salut</span><span class="p">()</span>
    <span class="k">return</span> <span class="s">&quot;42&quot;</span>

<span class="n">hello</span><span class="p">(</span><span class="s">&quot;world&quot;</span><span class="p">)</span>
<span class="c"># Result:</span>
<span class="c">#   DEBUG:myapp.trace.hello] &gt; (&#39;world&#39;,) {}</span>
<span class="c">#   DEBUG:myapp.trace.salut]  &gt; () {}</span>
<span class="c">#   DEBUG:myapp.trace.salut]  &lt; return None [0.00 sec]</span>
<span class="c">#   DEBUG:myapp.trace.hello] &lt; return 42 [0.00 sec]</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="rootpy.logger.extended_logger.RootLoggerWrapper">
<em class="property">class </em><tt class="descclassname">rootpy.logger.extended_logger.</tt><tt class="descname">RootLoggerWrapper</tt><big>(</big><em>root_logger</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#RootLoggerWrapper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.RootLoggerWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rootpy.logger.extended_logger.ExtendedLogger" title="rootpy.logger.extended_logger.ExtendedLogger"><tt class="xref py py-class docutils literal"><span class="pre">rootpy.logger.extended_logger.ExtendedLogger</span></tt></a></p>
<p>Wraps python&#8217;s <tt class="docutils literal"><span class="pre">logging.RootLogger</span></tt> with our nicer methods.</p>
<p>RootLoggerWrapper is obtained through <tt class="docutils literal"><span class="pre">log[&quot;/&quot;]</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.extended_logger.log_stack">
<tt class="descclassname">rootpy.logger.extended_logger.</tt><tt class="descname">log_stack</tt><big>(</big><em>logger</em>, <em>level=20</em>, <em>limit=None</em>, <em>frame=None</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/extended_logger.html#log_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.extended_logger.log_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the current stack on <tt class="docutils literal"><span class="pre">logger</span></tt>.</p>
<p>This function is designed to be used during emission of log messages, so it
won&#8217;t call itself.</p>
</dd></dl>

</div>
<div class="section" id="module-rootpy.logger.multilogging">
<span id="rootpy-logger-multilogging-package"></span><h2>4.10.4.4. <a class="reference internal" href="#module-rootpy.logger.multilogging" title="rootpy.logger.multilogging"><tt class="xref py py-mod docutils literal"><span class="pre">rootpy.logger.multilogging</span></tt></a> Package<a class="headerlink" href="#module-rootpy.logger.multilogging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-use-logging-with-multiprocessing">
<h3>4.10.4.4.1. How to use logging with multiprocessing<a class="headerlink" href="#how-to-use-logging-with-multiprocessing" title="Permalink to this headline">¶</a></h3>
<p>The basic strategy is to set up a listener process which can have any logging
configuration you want - in this example, writing to rotated log files. Because
only the listener process writes to the log files, you don&#8217;t have file
corruption caused by multiple processes trying to write to the file.</p>
<p>The listener process is initialised with a queue, and waits for logging events
(LogRecords) to appear in the queue. When they do, they are processed according
to whatever logging configuration is in effect for the listener process.</p>
<p>Other processes can delegate all logging to the listener process. They can have
a much simpler logging configuration: just one handler, a QueueHandler, needs
to be added to the root logger. Other loggers in the configuration can be set
up with levels and filters to achieve the logging verbosity you need.</p>
<p>A QueueHandler processes events by sending them to the multiprocessing queue
that it&#8217;s initialised with.</p>
<dl class="class">
<dt id="rootpy.logger.multilogging.Listener">
<em class="property">class </em><tt class="descclassname">rootpy.logger.multilogging.</tt><tt class="descname">Listener</tt><big>(</big><em>name</em>, <em>queue</em>, <em>capacity=1</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/multilogging.html#Listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.multilogging.Listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">multiprocessing.process.Process</span></tt></p>
<p>Because you&#8217;ll want to define the logging configurations for listener and
workers, the listener and worker process functions take a configurer
parameter which is a callable for configuring logging for that process.
These functions are also passed the queue, which they use for communication.</p>
<p>In practice, you can configure the listener however you want, but note that
in this simple example, the listener does not apply level or filter logic to
received records. In practice, you would probably want to do ths logic in
the worker processes, to avoid sending events which would be filtered out
between processes.</p>
<p>The size of the rotated files is made small so you can see the results
easily.</p>
<p>This is the listener process top-level loop: wait for logging events
(LogRecords) on the queue and handle them, quit when you get a None for a
LogRecord.</p>
</dd></dl>

<dl class="class">
<dt id="rootpy.logger.multilogging.QueueHandler">
<em class="property">class </em><tt class="descclassname">rootpy.logger.multilogging.</tt><tt class="descname">QueueHandler</tt><big>(</big><em>queue</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/multilogging.html#QueueHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.multilogging.QueueHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">logging.Handler</span></tt></p>
<p>This is a logging handler which sends events to a multiprocessing queue.
The plan is to add it to Python 3.2, but this can be copy pasted into
user code for use with earlier Python versions.</p>
<dl class="method">
<dt id="rootpy.logger.multilogging.QueueHandler.emit">
<tt class="descname">emit</tt><big>(</big><em>record</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/multilogging.html#QueueHandler.emit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.multilogging.QueueHandler.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit a record.
Writes the LogRecord to the queue.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-rootpy.logger.magic">
<span id="scary-magic-in-rootpy-logger-magic"></span><h2>4.10.4.5. Scary magic in <a class="reference internal" href="#module-rootpy.logger.magic" title="rootpy.logger.magic"><tt class="xref py py-mod docutils literal"><span class="pre">rootpy.logger.magic</span></tt></a><a class="headerlink" href="#module-rootpy.logger.magic" title="Permalink to this headline">¶</a></h2>
<p>Here be dragons.</p>
<p>This module contains hackery to bend the CPython interpreter to our will.</p>
<p>It&#8217;s necessary because it&#8217;s not possible to throw an exception from within a
ctypes callback. Instead, the exception is thrown from a line tracer which we
forcably insert into the appropriate frame. Then we make that frame&#8217;s next
opcode a <tt class="docutils literal"><span class="pre">JUMP_ABSOLUTE</span></tt> to the last line of code. Yes.</p>
<p>This is a bad idea and should never be used anywhere important where reliability
is a concern. Also, if you like your sanity. This thing <em>will</em> break backtraces
when you least expect it, leading to you looking at the wrong thing.</p>
<p>What lies within is the product of a sick mind and should never be exposed to
humanity.</p>
<dl class="function">
<dt id="rootpy.logger.magic.fix_ipython_startup">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">fix_ipython_startup</tt><big>(</big><em>fn</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/magic.html#fix_ipython_startup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.magic.fix_ipython_startup" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to fix IPython startup to not print (Bool_t)1</p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.magic.get_f_code_idx">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">get_f_code_idx</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/magic.html#get_f_code_idx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.magic.get_f_code_idx" title="Permalink to this definition">¶</a></dt>
<dd><p>How many pointers into PyFrame is the <tt class="docutils literal"><span class="pre">f_code</span></tt> variable?</p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.magic.get_frame_pointers">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">get_frame_pointers</tt><big>(</big><em>frame=None</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/magic.html#get_frame_pointers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.magic.get_frame_pointers" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain writable pointers to <tt class="docutils literal"><span class="pre">frame.f_trace</span></tt> and <tt class="docutils literal"><span class="pre">frame.f_lineno</span></tt>.</p>
<p>Very dangerous. Unlikely to be portable between python implementations.</p>
<p>This is hard in general because the <tt class="docutils literal"><span class="pre">PyFrameObject</span></tt> can have a variable size
depending on the build configuration. We can get it reliably because we can
determine the offset to <tt class="docutils literal"><span class="pre">f_tstate</span></tt> by searching for the value of that pointer.</p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.magic.get_seh">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">get_seh</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/magic.html#get_seh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.magic.get_seh" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a function which can be used to set the ROOT error handler with a
python function and returns the existing error handler.</p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.magic.re_execute_with_exception">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">re_execute_with_exception</tt><big>(</big><em>frame</em>, <em>exception</em>, <em>traceback</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/magic.html#re_execute_with_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.magic.re_execute_with_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Dark magic. Causes <tt class="docutils literal"><span class="pre">frame</span></tt> to raise an exception at the current location
with <tt class="docutils literal"><span class="pre">traceback</span></tt> appended to it.</p>
<p>Note that since the line tracer is raising an exception, the interpreter
disables the global trace, so it&#8217;s not possible to restore the previous
tracing conditions.</p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.magic.set_error_handler">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">set_error_handler</tt><big>(</big><em>fn</em><big>)</big><a class="headerlink" href="#rootpy.logger.magic.set_error_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Set ROOT&#8217;s warning/error handler. Returns the existing one.</p>
</dd></dl>

<dl class="function">
<dt id="rootpy.logger.magic.set_linetrace_on_frame">
<tt class="descclassname">rootpy.logger.magic.</tt><tt class="descname">set_linetrace_on_frame</tt><big>(</big><em>f</em>, <em>localtrace=None</em><big>)</big><a class="reference internal" href="../_modules/rootpy/logger/magic.html#set_linetrace_on_frame"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#rootpy.logger.magic.set_linetrace_on_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-portable function to modify linetracing.</p>
<p>Remember to enable global tracing with <a class="reference external" href="http://docs.python.org/2/library/sys.html#sys.settrace" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">sys.settrace()</span></tt></a>, otherwise no
effect!</p>
</dd></dl>

</div>
</div>


                    
                        <div id="disqus_thread"></div>
                        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    
                </div>
                <div class="span3">
                    
        <div class="sphinxsidebar">
            <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">4.10.4. <tt class="docutils literal"><span class="pre">rootpy.logger</span></tt> Package</a><ul>
<li><a class="reference internal" href="#rootpy-logger">4.10.4.1. <tt class="docutils literal"><span class="pre">rootpy.logger</span></tt></a></li>
<li><a class="reference internal" href="#module-rootpy.logger.color">4.10.4.2. <tt class="docutils literal"><span class="pre">rootpy.logger.color</span></tt> Package</a></li>
<li><a class="reference internal" href="#module-rootpy.logger.extended_logger">4.10.4.3. <tt class="docutils literal"><span class="pre">rootpy.logger.extended_logger</span></tt> Package</a></li>
<li><a class="reference internal" href="#module-rootpy.logger.multilogging">4.10.4.4. <tt class="docutils literal"><span class="pre">rootpy.logger.multilogging</span></tt> Package</a><ul>
<li><a class="reference internal" href="#how-to-use-logging-with-multiprocessing">4.10.4.4.1. How to use logging with multiprocessing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-rootpy.logger.magic">4.10.4.5. Scary magic in <tt class="docutils literal"><span class="pre">rootpy.logger.magic</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rootpy.io.html"
                        title="previous chapter">4.10.3. io Package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="rootpy.math.html"
                        title="next chapter">4.10.5. math Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/modules/rootpy.logging.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
            </div>
        </div>
                </div>
            
        </div>
    </div>
    <div class="footer">
        
        <div class="container">
                    &copy;
                        Copyright 2013, rootpy developers.
                Created using <a
                        href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3
                    .
                <!--Theme <a href="https://github.com/scotch/sphinx-bootstrap">Sphinx-Bootstrap</a>
                adapted from
                <a href="http://twitter.github.com/bootstrap/">Twitter's
                    Bootstrap</a> by <a href="http://www.scotchmedia.com">Scotch
                    Media</a> -->
        </div>
    </div>


    <!-- disqus -->
    <script type="text/javascript">
        var disqus_title = '4.10.4. rootpy.logger Package &mdash; rootpy dev documentation';
        var disqus_identifier ='code' + '.' + "rootpy" + window.location.pathname.replace('/', '.');
    </script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "rootpy"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


<script type="text/javascript">
    $('.nav .active').on('click', function () {
        e.preventDefault()
        $(this).siblings().toggle()
    });
</script>

<!-- plusone -->
<script type="text/javascript">
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>

<!-- twitter -->
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>

</body>
</html>